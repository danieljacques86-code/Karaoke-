<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üì∫ TV + R√°dio Autom√°tico</title>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<style>
body{
margin:0;
background:black;
font-family:Arial;
color:white;
text-align:center;
}

h2{margin-top:10px}

video{
width:95%;
max-width:900px;
height:260px;
border-radius:12px;
margin-top:10px;
background:black;
}

button{
padding:12px 20px;
border:none;
border-radius:10px;
background:red;
color:white;
font-size:16px;
margin:5px;
}

.lista{
display:flex;
flex-wrap:wrap;
justify-content:center;
max-height:300px;
overflow:auto;
margin-top:10px;
}

.card{
width:140px;
margin:5px;
background:#111;
border-radius:10px;
padding:8px;
cursor:pointer;
font-size:13px;
}
.card:hover{background:red}
</style>
</head>

<body>

<h2>üì∫ TV + üéµ R√°dio Autom√°tico</h2>

<video id="video" controls></video>

<br>
<button onclick="iniciarRadio()">‚ñ∂ Iniciar R√°dio</button>
<button onclick="pararTudo()">‚èπ Parar</button>

<div class="lista" id="lista"></div>

<script>
var video = document.getElementById("video");
var audio = new Audio();

var playlistRadio = [];
var radioIndex = 0;

/* üî• SUA LISTA GITHUB */
var listaURL="https://raw.githubusercontent.com/danieljacques86-code/Listaplus/main/lista.m3u";

/* =========================
CARREGAR LISTA
=========================*/
async function carregar(){
let res = await fetch(listaURL);
let txt = await res.text();

let linhas = txt.split("\n");
let nome="Canal";

for(let i=0;i<linhas.length;i++){

if(linhas[i].includes("#EXTINF")){
nome = linhas[i].split(",")[1];
}

if(linhas[i].includes("http")){
let url = linhas[i].trim();

// cria bot√£o
let div=document.createElement("div");
div.className="card";
div.innerHTML="‚ñ∂ "+nome;
div.onclick=function(){tocar(url,nome)};
lista.appendChild(div);

// adiciona r√°dio se mp3
if(url.includes(".mp3") || url.includes("google")){
playlistRadio.push({nome:nome,url:url});
}
}
}
}

/* =========================
TOCAR VIDEO OU MUSICA
=========================*/
function tocar(url,nome){

// üéµ MP3
if(url.includes(".mp3") || url.includes("google")){
video.pause();
video.style.display="none";

audio.src=url;
audio.play();
document.title="üéµ "+nome;
return;
}

// üì° M3U8
if(Hls.isSupported() && url.includes(".m3u8")){
video.style.display="block";
audio.pause();

var hls=new Hls();
hls.loadSource(url);
hls.attachMedia(video);
document.title="üì∫ "+nome;
return;
}

// üé¨ MP4
video.style.display="block";
audio.pause();
video.src=url;
video.play();
document.title="üì∫ "+nome;
}

/* =========================
R√ÅDIO AUTOM√ÅTICO
=========================*/
function iniciarRadio(){
if(playlistRadio.length==0){
alert("Sem m√∫sicas na lista");
return;
}
tocarRadio();
}

function tocarRadio(){
audio.src = playlistRadio[radioIndex].url;
audio.play();

document.title="üìª R√°dio: "+playlistRadio[radioIndex].nome;

audio.onended=function(){
radioIndex++;
if(radioIndex>=playlistRadio.length){radioIndex=0;}
tocarRadio();
}
}

/* =========================
PARAR
=========================*/
function pararTudo(){
audio.pause();
video.pause();
}

/* iniciar */
carregar();
</script>

</body>
</html>
